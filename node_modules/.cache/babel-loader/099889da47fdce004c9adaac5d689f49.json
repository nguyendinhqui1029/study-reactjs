{"ast":null,"code":"import _objectSpread from\"C:/Users/qnguyen77/Desktop/reactjs/study-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faAngleRight,faList,faChevronCircleDown}from\"@fortawesome/free-solid-svg-icons\";import{Link,useRouteMatch,useHistory}from\"react-router-dom\";import\"./NavigateMenu.scss\";import{useDispatch,useSelector}from\"react-redux\";import{categoriesAction}from\"../../actions/categories\";import{addQuickLink,removeQuickLink}from\"../../actions/quicklink\";import categoryApi from\"../../api/category.api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";NavigateMenu.defaultProps={listMenu:[]};function NavigateMenu(props){var listMenu=props.listMenu;var categories=useSelector(function(cate){return cate.categories.categories;});var disPatch=useDispatch();var match=useRouteMatch({path:\"/\"});var history=useHistory();useEffect(function(){categoryApi.getCategoryByIdSubCategory().then(function(categoryList){return Promise.all((categoryList||[]).map(function(cate){return categoryApi.getCategoryByIdSubCategory(cate.id).then(function(cateLevel2){return Promise.all((cateLevel2||[]).map(function(level2){return categoryApi.getCategoryByIdSubCategory(level2.id);})).then(function(value){return(cateLevel2||[]).map(function(category,index){return _objectSpread(_objectSpread({},category),{},{subCategory:value[index]});});});});})).then(function(value){return(categoryList||[]).map(function(category,index){return _objectSpread(_objectSpread({},category),{},{subCategory:value[index]});});});}).then(function(categories){disPatch(categoriesAction(categories));});},[]);var handleSelectedCategory=function handleSelectedCategory(item){if(!item.hasOwnProperty(\"subCategory\")||!item.subCategory.length){disPatch(removeQuickLink(1));disPatch(addQuickLink({path:\"/product\",label:'Sản phẩm'}));disPatch(addQuickLink({path:\"/product/\".concat(item.id),label:item.name}));history.push({pathname:\"/product/\".concat(item.id),state:{category:item}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"NavMenu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ContainerCategory\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"TitleCategory\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faList,className:\"IconCategory\"}),\"Danh m\\u1EE5c s\\u1EA3n ph\\u1EA9m\",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faChevronCircleDown,className:\"IconChevronCircleDown\",style:{display:match.isExact?\"block\":\"none\"}})]}),/*#__PURE__*/_jsx(\"ul\",{style:{display:match.isExact?\"block\":\"none\"},children:categories.map(function(catagory,index){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleSelectedCategory(catagory);},children:[catagory.name,/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faAngleRight,className:catagory.subCategory.length>0?\"IconRight\":\"IconRightHidden\"}),catagory.subCategory.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"SubMenu\",children:catagory.subCategory.map(function(parentSubcategory,ind){return/*#__PURE__*/_jsxs(\"div\",{className:\"ContentSubMenu\",children:[/*#__PURE__*/_jsx(\"h4\",{children:parentSubcategory.name}),/*#__PURE__*/_jsx(\"ul\",{children:parentSubcategory.subCategory.map(function(subItem,index){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return handleSelectedCategory(subItem);},children:subItem.name},\"SUBMENU\".concat(index));})})]},ind);})})]},index);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Menu\",children:/*#__PURE__*/_jsx(\"ul\",{children:listMenu.map(function(item,index){return/*#__PURE__*/_jsx(MenuItem,{item:item},index);})})})]});}function MenuItem(_ref){var item=_ref.item;var match=useRouteMatch({path:item.path});var disPatch=useDispatch();var addQuickLinkEvent=function addQuickLinkEvent(item){disPatch(removeQuickLink(1));disPatch(addQuickLink(item));};return/*#__PURE__*/_jsx(Link,{to:item.path,exact:item&&item.exact?item.exact.toString():\"false\",className:\"MenuLink\",onClick:function onClick(){return addQuickLinkEvent({label:item.label,path:item.path});},children:/*#__PURE__*/_jsx(\"li\",{className:match&&match.isExact?\"Active\":\"\",children:item.label})});}export default NavigateMenu;","map":{"version":3,"sources":["C:/Users/qnguyen77/Desktop/reactjs/study-react/src/component/NavigateMenu/NavigateMenu.jsx"],"names":["React","useEffect","FontAwesomeIcon","faAngleRight","faList","faChevronCircleDown","Link","useRouteMatch","useHistory","useDispatch","useSelector","categoriesAction","addQuickLink","removeQuickLink","categoryApi","NavigateMenu","defaultProps","listMenu","props","categories","cate","disPatch","match","path","history","getCategoryByIdSubCategory","then","categoryList","Promise","all","map","id","cateLevel2","level2","value","category","index","subCategory","handleSelectedCategory","item","hasOwnProperty","length","label","name","push","pathname","state","display","isExact","catagory","parentSubcategory","ind","subItem","MenuItem","addQuickLinkEvent","exact","toString"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faAngleRight,\r\n  faList,\r\n  faChevronCircleDown,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  Link,\r\n  useRouteMatch,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport \"./NavigateMenu.scss\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  categoriesAction\r\n} from \"../../actions/categories\";\r\nimport { addQuickLink, removeQuickLink } from \"../../actions/quicklink\";\r\nimport categoryApi from \"../../api/category.api\";\r\nNavigateMenu.propTypes = {\r\n  listMenu: PropTypes.array,\r\n};\r\n\r\nNavigateMenu.defaultProps = {\r\n  listMenu: [],\r\n};\r\n\r\nfunction NavigateMenu(props) {\r\n  const { listMenu } = props;\r\n  const categories = useSelector((cate) => cate.categories.categories);\r\n  \r\n  const disPatch = useDispatch();\r\n  const match = useRouteMatch({ path: \"/\" });\r\n  let history = useHistory();\r\n  useEffect(() => {\r\n    categoryApi.getCategoryByIdSubCategory()\r\n      .then((categoryList) => {\r\n        return Promise.all(\r\n          (categoryList || []).map((cate) => {\r\n            return categoryApi\r\n              .getCategoryByIdSubCategory(cate.id)\r\n              .then((cateLevel2) => {\r\n                return Promise.all(\r\n                  (cateLevel2 || []).map((level2) => {\r\n                    return categoryApi.getCategoryByIdSubCategory(level2.id);\r\n                  })\r\n                ).then((value) => {\r\n                  return (cateLevel2 || []).map((category, index) => {\r\n                    return { ...category, subCategory: value[index] };\r\n                  });\r\n                });\r\n              });\r\n          })\r\n        ).then((value) => {\r\n          return (categoryList || []).map((category, index) => {\r\n            return { ...category, subCategory: value[index] };\r\n          });\r\n        });\r\n      })\r\n      .then((categories) => {\r\n        disPatch(categoriesAction(categories));\r\n      });\r\n  }, []);\r\n\r\n  const handleSelectedCategory = (item) => {\r\n    if (!item.hasOwnProperty(\"subCategory\") || !item.subCategory.length) {\r\n      disPatch(removeQuickLink(1));\r\n      disPatch(addQuickLink({ path: `/product`, label: 'Sản phẩm'}));\r\n      disPatch(addQuickLink({ path: `/product/${item.id}`, label: item.name }));\r\n      history.push({\r\n        pathname: `/product/${item.id}`,\r\n        state: { category: item },\r\n      });\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"NavMenu\">\r\n      <div className=\"ContainerCategory\">\r\n        <div className=\"TitleCategory\">\r\n          <FontAwesomeIcon icon={faList} className=\"IconCategory\" />\r\n          Danh mục sản phẩm\r\n          <FontAwesomeIcon\r\n            icon={faChevronCircleDown}\r\n            className=\"IconChevronCircleDown\"\r\n            style={{ display: match.isExact ? \"block\" : \"none\" }}\r\n          />\r\n        </div>\r\n        <ul style={{ display: match.isExact ? \"block\" : \"none\" }}>\r\n          {categories.map((catagory, index) => {\r\n            return (\r\n              <li onClick={() => handleSelectedCategory(catagory)} key={index}>\r\n                {catagory.name}\r\n                <FontAwesomeIcon\r\n                  icon={faAngleRight}\r\n                  className={\r\n                    catagory.subCategory.length > 0\r\n                      ? \"IconRight\"\r\n                      : \"IconRightHidden\"\r\n                  }\r\n                />\r\n                {catagory.subCategory.length > 0 && (\r\n                  <div className=\"SubMenu\">\r\n                    {catagory.subCategory.map((parentSubcategory, ind) => {\r\n                      return (\r\n                        <div className=\"ContentSubMenu\" key={ind}>\r\n                          <h4>{parentSubcategory.name}</h4>\r\n                          <ul>\r\n                            {parentSubcategory.subCategory.map(\r\n                              (subItem, index) => {\r\n                                return (\r\n                                  <li\r\n                                    key={`SUBMENU${index}`}\r\n                                    onClick={() =>\r\n                                      handleSelectedCategory(subItem)\r\n                                    }\r\n                                  >\r\n                                    {subItem.name}\r\n                                  </li>\r\n                                );\r\n                              }\r\n                            )}\r\n                          </ul>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"Menu\">\r\n        <ul>\r\n          {listMenu.map((item, index) => {\r\n            return <MenuItem item={item} key={index} />;\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MenuItem({ item }) {\r\n  const match = useRouteMatch({ path: item.path });\r\n  const disPatch = useDispatch();\r\n\r\n  const addQuickLinkEvent=(item)=>{\r\n    disPatch(removeQuickLink(1));\r\n    disPatch(addQuickLink(item));\r\n  }\r\n  return (\r\n    <Link\r\n      to={item.path}\r\n      exact={item && item.exact ? item.exact.toString() : \"false\"}\r\n      className=\"MenuLink\"\r\n      onClick={() => addQuickLinkEvent({ label: item.label, path: item.path })}\r\n    >\r\n      <li className={match && match.isExact ? \"Active\" : \"\"}>{item.label}</li>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default NavigateMenu;\r\n"]},"metadata":{},"sourceType":"module"}