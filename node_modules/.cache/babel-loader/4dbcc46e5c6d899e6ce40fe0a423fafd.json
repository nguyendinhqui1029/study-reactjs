{"ast":null,"code":"import _slicedToArray from\"C:/Users/qnguyen77/Desktop/reactjs/study-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import DeliveryAddress from\"../../component/DeliveryAddress/DeliveryAddress\";import PayInfo from\"../../component/PayInfo/PayInfo\";import OrderInfo from\"../../component/OrderInfo/OrderInfo\";import\"./Payment.scss\";import{useSelector,useDispatch}from\"react-redux\";import{calculateIntoMoney,calculateTotal}from\"../../util/util\";import{addDeliveryMethod,addPaymentMethod,setID,setStatus}from\"../../actions/cart\";import orderDetailApi from\"../../api/orderDetail\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Payment(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),paymentMethod=_useState2[0],setPaymentMethod=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitForm=_useState4[0],setIsSubmitForm=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),deliveryMethod=_useState6[0],setDeliveryMethod=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),deliveryFee=_useState8[0],setDeliveryFee=_useState8[1];var history=useHistory();var cartList=useSelector(function(carts){return carts.cart.cartList;});// let address = useSelector((carts) => carts.cart.address);\n// let addressOther = useSelector((carts) => carts.cart.addressOther);\nvar cartDetail=useSelector(function(carts){return carts.cart;});var disPatch=useDispatch();cartList=calculateIntoMoney(cartList);useEffect(function(){setPaymentMethod(payMethod);setDeliveryMethod(deliveryMethod);},[payMethod,deliveryMethod]);var changeDeliveryMethod=function changeDeliveryMethod(item){disPatch(addDeliveryMethod(item));setDeliveryFee(item.fee);};var changePayMethod=function changePayMethod(item){disPatch(addPaymentMethod(item));};var handleClickOrder=function handleClickOrder(){setIsSubmitForm(true);setTimeout(function(){orderDetailApi.addOrderDetail(cartDetail).then(function(result){disPatch(setID(result.id));disPatch(setStatus(\"Waiting Approval\"));history.push(\"/cart-detail/completed\");});setIsSubmitForm(false);},3000);};return/*#__PURE__*/_jsxs(\"div\",{className:\"Payment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ContainerDeliveryAddress\",children:/*#__PURE__*/_jsx(DeliveryAddress,{isSubmitForm:isSubmitForm})}),/*#__PURE__*/_jsx(\"div\",{className:\"ContainerPayInfo\",children:/*#__PURE__*/_jsx(PayInfo,{payMethod:payMethod,deliveryMethod:deliveryMethod1,changeDeliveryMethod:changeDeliveryMethod,changePayMethod:changePayMethod})}),/*#__PURE__*/_jsx(\"div\",{className:\"ContainerOrderInfo\",children:/*#__PURE__*/_jsx(OrderInfo,{intoMoney:calculateTotal(cartList),deliveryFee:deliveryFee,totalPay:calculateTotal(cartList)+deliveryFee,dataList:cartList,handleClickOrder:handleClickOrder,headerList:headerList})})]});}export default Payment;var payMethod=[{id:\"P001\",title:\"Thanh toán khi giao hàng (COD)\"},{id:\"P002\",title:\"Thanh toán online qua cổng OnePay bằng thẻ ATM nội địa\"},{id:\"P003\",title:\"Chuyển khoản qua ngân hàng\"},{id:\"P004\",title:\"Thanh toán online qua cổng OnePay bằng thẻ Visa/Master/JCB\"}];var headerList=[{flex:1,label:\"\",propertyMapping:\"imageUrl\",type:\"IMAGE\",formatCurrency:false},{flex:3,label:\"TÊN SẢN PHẨM\",propertyMapping:\"productName\",type:\"LABLE\",formatCurrency:false},{flex:2,label:\"GIÁ\",propertyMapping:\"price\",type:\"LABLE\",formatCurrency:true},{flex:2,label:\"SỐ LƯỢNG\",propertyMapping:\"amount\",type:\"LABLE\",formatCurrency:false}];var deliveryMethod1=[{id:\"D001\",title:\"Vui lòng chọn cách vận chuyển\",fee:0},{id:\"D002\",title:\"Chuyển phát nhanh\",fee:30000},{id:\"D003\",title:\"Chuyển phát qua bưu điện\",fee:30000}];","map":{"version":3,"sources":["C:/Users/qnguyen77/Desktop/reactjs/study-react/src/component/Payment/Payment.jsx"],"names":["React","useEffect","useState","DeliveryAddress","PayInfo","OrderInfo","useSelector","useDispatch","calculateIntoMoney","calculateTotal","addDeliveryMethod","addPaymentMethod","setID","setStatus","orderDetailApi","useHistory","Payment","paymentMethod","setPaymentMethod","isSubmitForm","setIsSubmitForm","deliveryMethod","setDeliveryMethod","deliveryFee","setDeliveryFee","history","cartList","carts","cart","cartDetail","disPatch","payMethod","changeDeliveryMethod","item","fee","changePayMethod","handleClickOrder","setTimeout","addOrderDetail","then","result","id","push","deliveryMethod1","headerList","title","flex","label","propertyMapping","type","formatCurrency"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport DeliveryAddress from \"../../component/DeliveryAddress/DeliveryAddress\";\r\nimport PayInfo from \"../../component/PayInfo/PayInfo\";\r\nimport OrderInfo from \"../../component/OrderInfo/OrderInfo\";\r\n\r\nimport \"./Payment.scss\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { calculateIntoMoney, calculateTotal } from \"../../util/util\";\r\nimport {\r\n  addDeliveryMethod,\r\n  addPaymentMethod,\r\n  setID,\r\n  setStatus,\r\n} from \"../../actions/cart\";\r\nimport orderDetailApi from \"../../api/orderDetail\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Payment() {\r\n  const [paymentMethod, setPaymentMethod] = useState([]);\r\n  const [isSubmitForm, setIsSubmitForm] = useState(false);\r\n  const [deliveryMethod, setDeliveryMethod] = useState([]);\r\n  const [deliveryFee, setDeliveryFee] = useState(0);\r\n  const history = useHistory();\r\n  let cartList = useSelector((carts) => carts.cart.cartList);\r\n  // let address = useSelector((carts) => carts.cart.address);\r\n  // let addressOther = useSelector((carts) => carts.cart.addressOther);\r\n  let cartDetail = useSelector((carts) => carts.cart);\r\n  const disPatch = useDispatch();\r\n  cartList = calculateIntoMoney(cartList);\r\n\r\n  useEffect(() => {\r\n    setPaymentMethod(payMethod);\r\n    setDeliveryMethod(deliveryMethod);\r\n  }, [payMethod, deliveryMethod]);\r\n\r\n  const changeDeliveryMethod = (item) => {\r\n    disPatch(addDeliveryMethod(item));\r\n    setDeliveryFee(item.fee);\r\n  };\r\n  const changePayMethod = (item) => {\r\n    disPatch(addPaymentMethod(item));\r\n  };\r\n\r\n  const handleClickOrder = () => {\r\n    setIsSubmitForm(true);\r\n    setTimeout(() => {\r\n      orderDetailApi.addOrderDetail(cartDetail).then((result) => {\r\n        disPatch(setID(result.id));\r\n        disPatch(setStatus(\"Waiting Approval\"));\r\n        history.push(\"/cart-detail/completed\");\r\n      });\r\n      setIsSubmitForm(false);\r\n    }, 3000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Payment\">\r\n      <div className=\"ContainerDeliveryAddress\">\r\n        <DeliveryAddress isSubmitForm={isSubmitForm} />\r\n      </div>\r\n      <div className=\"ContainerPayInfo\">\r\n        <PayInfo\r\n          payMethod={payMethod}\r\n          deliveryMethod={deliveryMethod1}\r\n          changeDeliveryMethod={changeDeliveryMethod}\r\n          changePayMethod={changePayMethod}\r\n        />\r\n      </div>\r\n      <div className=\"ContainerOrderInfo\">\r\n        <OrderInfo\r\n          intoMoney={calculateTotal(cartList)}\r\n          deliveryFee={deliveryFee}\r\n          totalPay={calculateTotal(cartList) + deliveryFee}\r\n          dataList={cartList}\r\n          handleClickOrder={handleClickOrder}\r\n          headerList={headerList}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Payment;\r\n\r\nconst payMethod = [\r\n  {\r\n    id: \"P001\",\r\n    title: \"Thanh toán khi giao hàng (COD)\",\r\n  },\r\n  {\r\n    id: \"P002\",\r\n    title: \"Thanh toán online qua cổng OnePay bằng thẻ ATM nội địa\",\r\n  },\r\n  {\r\n    id: \"P003\",\r\n    title: \"Chuyển khoản qua ngân hàng\",\r\n  },\r\n  {\r\n    id: \"P004\",\r\n    title: \"Thanh toán online qua cổng OnePay bằng thẻ Visa/Master/JCB\",\r\n  },\r\n];\r\n\r\nconst headerList = [\r\n  {\r\n    flex: 1,\r\n    label: \"\",\r\n    propertyMapping: \"imageUrl\",\r\n    type: \"IMAGE\",\r\n    formatCurrency: false,\r\n  },\r\n  {\r\n    flex: 3,\r\n    label: \"TÊN SẢN PHẨM\",\r\n    propertyMapping: \"productName\",\r\n    type: \"LABLE\",\r\n    formatCurrency: false,\r\n  },\r\n  {\r\n    flex: 2,\r\n    label: \"GIÁ\",\r\n    propertyMapping: \"price\",\r\n    type: \"LABLE\",\r\n    formatCurrency: true,\r\n  },\r\n  {\r\n    flex: 2,\r\n    label: \"SỐ LƯỢNG\",\r\n    propertyMapping: \"amount\",\r\n    type: \"LABLE\",\r\n    formatCurrency: false,\r\n  },\r\n];\r\n\r\nconst deliveryMethod1 = [\r\n  {\r\n    id: \"D001\",\r\n    title: \"Vui lòng chọn cách vận chuyển\",\r\n    fee: 0,\r\n  },\r\n  {\r\n    id: \"D002\",\r\n    title: \"Chuyển phát nhanh\",\r\n    fee: 30000,\r\n  },\r\n  {\r\n    id: \"D003\",\r\n    title: \"Chuyển phát qua bưu điện\",\r\n    fee: 30000,\r\n  },\r\n];\r\n"]},"metadata":{},"sourceType":"module"}